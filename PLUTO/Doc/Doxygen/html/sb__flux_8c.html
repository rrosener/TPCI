<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>PLUTO: /home/Andrea/PLUTO/Src/MHD/ShearingBox/sb_flux.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PLUTO
   &#160;<span id="projectnumber">4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_413f4e031a85da0d68269c6fd2f76e1c.html">Src</a></li><li class="navelem"><a class="el" href="dir_393faf7c97aebfe9abb0723b81bbf748.html">MHD</a></li><li class="navelem"><a class="el" href="dir_a4295f36876b266efbc238c44a1ad819.html">ShearingBox</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">sb_flux.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Enforce conservation at the X1 boundaries in the shearing-box module.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="pluto_8h_source.html">pluto.h</a>&quot;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aad9af0cd82fa2cbdf5ae814090a52807"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sb__flux_8c.html#aad9af0cd82fa2cbdf5ae814090a52807">SB_SaveFluxes</a> (<a class="el" href="struct_state__1_d.html">State_1D</a> *state, <a class="el" href="struct_grid.html">Grid</a> *grid)</td></tr>
<tr class="separator:aad9af0cd82fa2cbdf5ae814090a52807"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc900e28d8388b00c09c8db8c60361f0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sb__flux_8c.html#acc900e28d8388b00c09c8db8c60361f0">SB_CorrectFluxes</a> (Data_Arr U, double t, double dt, <a class="el" href="struct_grid.html">Grid</a> *grid)</td></tr>
<tr class="separator:acc900e28d8388b00c09c8db8c60361f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a4442cfa50b6656f0bc2ab1c19f3ce529"><td class="memItemLeft" align="right" valign="top">static double ****&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sb__flux_8c.html#a4442cfa50b6656f0bc2ab1c19f3ce529">FluxL</a></td></tr>
<tr class="separator:a4442cfa50b6656f0bc2ab1c19f3ce529"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c6ebae6d7f5177e0b3d0f6cd99239c0"><td class="memItemLeft" align="right" valign="top">static double ****&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sb__flux_8c.html#a1c6ebae6d7f5177e0b3d0f6cd99239c0">FluxR</a></td></tr>
<tr class="separator:a1c6ebae6d7f5177e0b3d0f6cd99239c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file provides a set of functions for storing and then modifying the upwind fluxes computed during the Riemann solver at the leftmost and righmost physical boundaries. These tasks are performed only when either SB_SYMMETRIZE_HYDRO, SB_SYMMETRIZE_EY, SB_SYMMETRIZE_EZ flags are set to YES in Src/MHD/shearingbox.h and are useful to avoid loss of conservation in the hydrodynamical variables (density, momentum, energy) and/or magnetic fields.</p>
<p>This is first achieved by calling the SB_SAVE_FLUXES() function during the time stepping scheme, with the purpose of storing the leftmost and rightmost conservative fluxes in the x-direction into the static arrays FluxL[] and FluxR[].</p>
<p>These fluxes are then subsequently used by SB_CORRECT_FLUXES() which interpolates the fluxes and properly correct leftmost and rightmost cell-centered flow quantities to ensure conservation.</p>
<p>The treatment of staggered magnetic field is done similarly by SB_CORRECT_EMF().</p>
<dl class="section author"><dt>Authors</dt><dd>A. Mignone (<a href="#" onclick="location.href='mai'+'lto:'+'mig'+'no'+'ne@'+'ph'+'.un'+'it'+'o.i'+'t'; return false;">migno<span style="display: none;">.nosp@m.</span>ne@p<span style="display: none;">.nosp@m.</span>h.uni<span style="display: none;">.nosp@m.</span>to.i<span style="display: none;">.nosp@m.</span>t</a>)<br/>
 G. Muscianisi (<a href="#" onclick="location.href='mai'+'lto:'+'g.m'+'us'+'ica'+'ni'+'si@'+'ci'+'nec'+'a.'+'it'; return false;">g.mus<span style="display: none;">.nosp@m.</span>ican<span style="display: none;">.nosp@m.</span>isi@c<span style="display: none;">.nosp@m.</span>inec<span style="display: none;">.nosp@m.</span>a.it</a>)<br/>
 G. Bodo (<a href="#" onclick="location.href='mai'+'lto:'+'bod'+'o@'+'oat'+'o.'+'ina'+'f.'+'it'; return false;">bodo@<span style="display: none;">.nosp@m.</span>oato<span style="display: none;">.nosp@m.</span>.inaf<span style="display: none;">.nosp@m.</span>.it</a>)</dd></dl>
<dl class="section date"><dt>Date</dt><dd>Aug 16, 2012 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="acc900e28d8388b00c09c8db8c60361f0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SB_CorrectFluxes </td>
          <td>(</td>
          <td class="paramtype">Data_Arr&#160;</td>
          <td class="paramname"><em>U</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_grid.html">Grid</a> *&#160;</td>
          <td class="paramname"><em>grid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Interpolate x-fluxes FLuxL and FluxR and properly correct leftmost and rightmost cells to ensure conservation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">U</td><td>data array containing cell-centered quantities </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">t</td><td>the time step at which fluxes have to be computed </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dt</td><td>the time step being used in the integrator stage </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">grid</td><td>pointer to array of <a class="el" href="struct_grid.html">Grid</a> structures </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>In parallel and if there's more than one processor in the x direction, we modify the values of FluxL and FluxR independently since the two boundary sides are handled by different processors. Conversely, when a processor owns both sides, we need to copy at least one of the two arrays before doing interpolation since their original values are lost when setting boundary conditions. </dd></dl>

</div>
</div>
<a class="anchor" id="aad9af0cd82fa2cbdf5ae814090a52807"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SB_SaveFluxes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_state__1_d.html">State_1D</a> *&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_grid.html">Grid</a> *&#160;</td>
          <td class="paramname"><em>grid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Store leftmost and rightmost conservative fluxes in the x direction into FluxL and FluxR.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">state</td><td>pointer to a <a class="el" href="struct_state__1_d.html">State_1D</a> structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">grid</td><td>pointer to an array of <a class="el" href="struct_grid.html">Grid</a> structures</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>This function has no return value. </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a4442cfa50b6656f0bc2ab1c19f3ce529"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double**** FluxL</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Array of fluxes at the left x-boundary. </p>

</div>
</div>
<a class="anchor" id="a1c6ebae6d7f5177e0b3d0f6cd99239c0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double**** FluxR</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Array of fluxes at the right x-boundary. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Nov 9 2012 13:15:48 for PLUTO by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
